<ion-header>
  <ion-toolbar>
    <ion-title>
      Nova Postagem
    </ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <span ion-text color="primary" showWhen="ios">Cancel</span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list no-lines>
      <ion-item>
        <ion-avatar item-left>
          <img src="{{current_user.avatar_url}}">
        </ion-avatar>
        <p>{{current_user.first_name}}</p>
      </ion-item>
      <ion-item>
        <ion-textarea [(ngModel)]="post.description" [formControl]="postController" placeHolder="O que você está pensando..."></ion-textarea>
      </ion-item>
      <ion-grid>
        <ion-row>
          <ion-item>
            <button ion-button item-right (click)="createPost()">
              <span ion-text>Publicar</span>
            </button>
          </ion-item>
        </ion-row>
        <ion-row>
          <img id='image_test' src="" alt="" />
          <div class="post-attaches2" *ngIf="post.medias.images">
            <div class="post-attach post-image" *ngFor="let media of post.medias.images">
              <img src="../../assets/images/4.jpg" alt="" />
              {{erro}}
            </div>
          </div>
          <div class="post-attaches2" *ngIf="link_preview">
            <div class="post-attach rich_url" >
              Site: {{link_preview.title}}
              Descrição: {{link_preview.description}}
              <img src="{{link_preview.images[0].src}}" *ngIf="link_preview.images.length > 0" alt="" />
            </div>
          </div>
        </ion-row>
      </ion-grid>
  </ion-list>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <button ion-button class="form-buttons" color="light" clear (click)="openMediaOptions()" icon-left>
      <ion-icon ios="ios-open" md="md-open"></ion-icon>
      Selecionar midia
    </button>
  </ion-toolbar>
</ion-footer>
